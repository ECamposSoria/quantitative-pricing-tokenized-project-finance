{
  "timestamp": "2025-11-22T22:24:43.735441+00:00",
  "curve_file": "usd_combined_curve_2025-11-20.csv",
  "zero_curve": {
    "source_file": "usd_combined_curve_2025-11-20.csv",
    "source_path": "/app/data/derived/market_curves/usd_combined_curve_2025-11-20.csv",
    "currency": "USD",
    "num_points": 9,
    "spot_rates": {
      "1Y": "3.65%",
      "2Y": "3.55%",
      "3Y": "3.56%",
      "5Y": "3.68%",
      "7Y": "3.87%",
      "10Y": "4.10%",
      "15Y": "4.39%",
      "20Y": "4.68%",
      "30Y": "4.73%"
    },
    "forward_rates": {
      "1Y1Y": "3.450%",
      "2Y1Y": "3.580%",
      "5Y5Y": "4.522%",
      "10Y10Y": "5.263%"
    },
    "loader": "load_zero_curve_from_csv (pftoken/pricing/curve_loader.py)"
  },
  "tranches": {
    "tranches": [
      {
        "name": "Senior",
        "principal": "$43,200,000.00",
        "principal_raw": 43200000.0,
        "coupon": "6.0%",
        "coupon_raw": 0.060000000000000005,
        "weight": "60%",
        "weight_raw": 0.6,
        "grace_years": 4,
        "tenor_years": 15,
        "amortization": "Sculpted",
        "seniority": 1
      },
      {
        "name": "Mezzanine",
        "principal": "$18,000,000.00",
        "principal_raw": 18000000.0,
        "coupon": "8.5%",
        "coupon_raw": 0.085,
        "weight": "25%",
        "weight_raw": 0.25,
        "grace_years": 4,
        "tenor_years": 15,
        "amortization": "Amortizing",
        "seniority": 2
      },
      {
        "name": "Subordinated",
        "principal": "$10,800,000.00",
        "principal_raw": 10800000.0,
        "coupon": "11.0%",
        "coupon_raw": 0.11,
        "weight": "15%",
        "weight_raw": 0.15,
        "grace_years": 4,
        "tenor_years": 15,
        "amortization": "Bullet",
        "seniority": 3
      }
    ],
    "total_principal": "$72,000,000.00",
    "total_principal_raw": 72000000.0,
    "source": "data/input/leo_iot/tranches.csv"
  },
  "pricing": {
    "metrics": [
      {
        "tranche": "Senior",
        "price_per_par": "1.14115",
        "price_per_par_raw": 1.1411511534633618,
        "present_value": "$49,297,729.83",
        "present_value_raw": 49297729.82961723,
        "ytm": "3.9219%",
        "ytm_raw": 0.03921865524852547,
        "duration": "6.7347",
        "duration_raw": 6.734696174360568,
        "lgd": "0.000",
        "lgd_raw": 0.0
      },
      {
        "tranche": "Mezzanine",
        "price_per_par": "1.32727",
        "price_per_par_raw": 1.327273649949084,
        "present_value": "$23,890,925.70",
        "present_value_raw": 23890925.69908351,
        "ytm": "3.9474%",
        "ytm_raw": 0.03947355339094467,
        "duration": "6.7949",
        "duration_raw": 6.794917150674501,
        "lgd": "0.555",
        "lgd_raw": 0.5550042523219378
      },
      {
        "tranche": "Subordinated",
        "price_per_par": "1.55772",
        "price_per_par_raw": 1.5577206151353578,
        "present_value": "$16,823,382.64",
        "present_value_raw": 16823382.643461864,
        "ytm": "3.9963%",
        "ytm_raw": 0.03996287691765485,
        "duration": "7.1812",
        "duration_raw": 7.18124039652013,
        "lgd": "1.000",
        "lgd_raw": 1.0
      }
    ],
    "haircut": "25%",
    "time_to_liquidation": "1.5 a\u00f1os",
    "sources": [
      "FinancialPipeline + PricingEngine + CollateralAnalyzer",
      "Haircut from PricingContext",
      "LGD derived from CollateralAnalyzer waterfall"
    ],
    "ytm_note": "YTM solved against risk-free curve; credit/liquidity spreads in TokenizedSpreadModel"
  },
  "spreads": {
    "spreads": [
      {
        "tranche": "Senior",
        "traditional_bps": "117.50 bps",
        "traditional_bps_raw": 117.50000000000001,
        "tokenized_bps": "30.68 bps",
        "tokenized_bps_raw": 30.67992500738564,
        "delta_bps": "-86.82 bps",
        "delta_bps_raw": -86.82007499261437
      },
      {
        "tranche": "Mezzanine",
        "traditional_bps": "73.75 bps",
        "traditional_bps_raw": 73.75,
        "tokenized_bps": "24.76 bps",
        "tokenized_bps_raw": 24.758649308632904,
        "delta_bps": "-48.99 bps",
        "delta_bps_raw": -48.991350691367096
      },
      {
        "tranche": "Subordinated",
        "traditional_bps": "65.93 bps",
        "traditional_bps_raw": 65.93060011070335,
        "tokenized_bps": "23.07 bps",
        "tokenized_bps_raw": 23.06685625184641,
        "delta_bps": "-42.86 bps",
        "delta_bps_raw": -42.86374385885694
      }
    ],
    "sources": [
      "Cr\u00e9dito/Liquidez: stochastic_params.yaml",
      "Infraestructura: tokenized_infra_costs.csv",
      "L\u00f3gica: pftoken/pricing/spreads/"
    ]
  },
  "delta_decomposition": {
    "components": [
      {
        "name": "Cr\u00e9dito",
        "delta_bps": "-5.70 bps",
        "delta_bps_raw": -5.702090016605502,
        "source": "Floor 5.0 bps + transparencia -30.0 bps"
      },
      {
        "name": "Liquidez",
        "delta_bps": "-48.10 bps",
        "delta_bps_raw": -48.096520897300095,
        "source": "Tinlake TVL calibration (DeFiLlama)"
      },
      {
        "name": "Originaci\u00f3n",
        "delta_bps": "-7.50 bps",
        "delta_bps_raw": -7.5,
        "source": "\u03b2 = 0.5 (50% automation)"
      },
      {
        "name": "Servicing",
        "delta_bps": "-17.50 bps",
        "delta_bps_raw": -17.5,
        "source": "\u03b3 = 1.0 + residual 5.0 bps"
      },
      {
        "name": "Infraestructura",
        "delta_bps": "8.03 bps",
        "delta_bps_raw": 8.029166666666667,
        "source": "Ethereum gas/oracle/monitoring"
      }
    ],
    "total_delta_bps": "-70.77 bps",
    "total_delta_bps_raw": -70.76944424723894,
    "adjustments": [
      "Credit floor de 5.0 bps",
      "Infraestructura uniforme via infra_reference_principal",
      "Transparencia (-30.0 bps) aplica sobre piso"
    ]
  },
  "wacd": {
    "traditional_after_tax": "6.2725%",
    "traditional_after_tax_raw": 0.06272453175124543,
    "tokenized_after_tax": "5.7417%",
    "tokenized_after_tax_raw": 0.057416823432702484,
    "delta_after_tax": "-0.5308%",
    "delta_after_tax_bps": "-53.08 bps",
    "delta_after_tax_bps_raw": -53.07708318542943,
    "delta_before_tax_bps": "-70.77 bps",
    "delta_before_tax_bps_raw": -70.76944424723894,
    "tax_rate": "25%",
    "tax_rate_raw": 0.25,
    "verification": "Delta after-tax = -70.77 \u00d7 (1 - 0.25) = -53.08 bps",
    "sources": [
      "WACDCalculator \u2014 pftoken/pricing/wacd.py",
      "Tax Rate: 25% \u2014 constants.py"
    ]
  },
  "tinlake": {
    "tvl_usd": "$1,447,607,220.00",
    "tvl_usd_raw": 1447607220.0,
    "avg_daily_volume_usd": "$186,114.67",
    "avg_daily_volume_usd_raw": 186114.66666666666,
    "avg_pool_ticket_usd": "$15,673,931.80",
    "avg_pool_ticket_usd_raw": 15673931.8,
    "datapoints": 31,
    "source": "api",
    "api_endpoint": "https://api.llama.fi/protocol/centrifuge",
    "timestamp_utc": "2025-11-22T22:24:44.831935+00:00",
    "snapshot_path": "data/derived/liquidity/tinlake_metrics.json"
  },
  "infrastructure": {
    "networks": [
      {
        "network": "Ethereum",
        "reference_principal": "$100,000,000.00",
        "annual_tx_count": 200,
        "gas_per_tx": 110000,
        "gas_price_gwei": 25.0,
        "oracle_bps": 3.0,
        "monitoring_bps": 2.0,
        "total_bps": 7.965000000000001
      },
      {
        "network": "Arbitrum",
        "reference_principal": "$100,000,000.00",
        "annual_tx_count": 200,
        "gas_per_tx": 35000,
        "gas_price_gwei": 1.5,
        "oracle_bps": 4.0,
        "monitoring_bps": 2.5,
        "total_bps": 13.50315
      },
      {
        "network": "Polygon",
        "reference_principal": "$100,000,000.00",
        "annual_tx_count": 200,
        "gas_per_tx": 45000,
        "gas_price_gwei": 0.9,
        "oracle_bps": 4.0,
        "monitoring_bps": 2.5,
        "total_bps": 13.580000648
      },
      {
        "network": "Optimism",
        "reference_principal": "$100,000,000.00",
        "annual_tx_count": 200,
        "gas_per_tx": 40000,
        "gas_price_gwei": 1.2,
        "oracle_bps": 4.5,
        "monitoring_bps": 2.5,
        "total_bps": 14.442880000000002
      },
      {
        "network": "Base",
        "reference_principal": "$100,000,000.00",
        "annual_tx_count": 200,
        "gas_per_tx": 28000,
        "gas_price_gwei": 1.0,
        "oracle_bps": 4.0,
        "monitoring_bps": 2.2,
        "total_bps": 14.08168
      }
    ],
    "source_file": "/app/data/derived/tokenized_infra_costs.csv",
    "sources": [
      "Etherscan V2 Gas Tracker",
      "Chainlink public docs"
    ]
  },
  "traceability": {
    "items": [
      {
        "item": "Curva Spots",
        "value": "Ver secci\u00f3n 1",
        "source": "usd_combined_curve_2025-11-20.csv (FRED DGS)"
      },
      {
        "item": "Senior Principal",
        "value": "$43,200,000.00",
        "source": "tranches.csv"
      },
      {
        "item": "Senior YTM",
        "value": "3.9219%",
        "source": "PricingEngine con curva de mercado"
      },
      {
        "item": "Senior PV",
        "value": "$49,297,729.83",
        "source": "PricingEngine discounting"
      },
      {
        "item": "Senior Duration",
        "value": "6.7347",
        "source": "Macaulay duration calculation"
      },
      {
        "item": "Senior LGD",
        "value": "0.000",
        "source": "CollateralAnalyzer"
      },
      {
        "item": "Mezzanine Principal",
        "value": "$18,000,000.00",
        "source": "tranches.csv"
      },
      {
        "item": "Mezzanine YTM",
        "value": "3.9474%",
        "source": "PricingEngine con curva de mercado"
      },
      {
        "item": "Mezzanine PV",
        "value": "$23,890,925.70",
        "source": "PricingEngine discounting"
      },
      {
        "item": "Mezzanine Duration",
        "value": "6.7949",
        "source": "Macaulay duration calculation"
      },
      {
        "item": "Mezzanine LGD",
        "value": "0.555",
        "source": "CollateralAnalyzer"
      },
      {
        "item": "Subordinated Principal",
        "value": "$10,800,000.00",
        "source": "tranches.csv"
      },
      {
        "item": "Subordinated YTM",
        "value": "3.9963%",
        "source": "PricingEngine con curva de mercado"
      },
      {
        "item": "Subordinated PV",
        "value": "$16,823,382.64",
        "source": "PricingEngine discounting"
      },
      {
        "item": "Subordinated Duration",
        "value": "7.1812",
        "source": "Macaulay duration calculation"
      },
      {
        "item": "Subordinated LGD",
        "value": "1.000",
        "source": "CollateralAnalyzer"
      },
      {
        "item": "Tax Rate",
        "value": "25%",
        "source": "constants.py"
      },
      {
        "item": "Haircut",
        "value": "25%",
        "source": "PricingContext"
      },
      {
        "item": "T_liquidation",
        "value": "1.5 a\u00f1os",
        "source": "PricingContext"
      },
      {
        "item": "Credit Floor",
        "value": "5.0 bps",
        "source": "credit.py"
      },
      {
        "item": "Credit Transparency",
        "value": "-30.0 bps",
        "source": "Allen et al. 2022"
      },
      {
        "item": "Infra Reference",
        "value": "$72,000,000.00",
        "source": "base.py (infra_reference_principal)"
      }
    ]
  },
  "raw": {
    "wacd_result": {
      "traditional": 0.06272453175124543,
      "tokenized": 0.057416823432702484,
      "delta": -0.005307708318542943
    },
    "delta_sensitivity": {
      "scenarios": [
        {
          "scenario": "Base",
          "liquidity_scale": 1.0,
          "beta_override": null,
          "infra_tx_multiplier": 1.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -48.096520897300095,
          "delta_origination_bps": -7.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 8.029166666666667,
          "total_delta_bps": -70.76944424723894,
          "tokenized_wacd": 0.057416823432702505,
          "wacd_delta_bps": -53.07708318542921
        },
        {
          "scenario": "Tinlake TVL -50%",
          "liquidity_scale": 0.5,
          "beta_override": null,
          "infra_tx_multiplier": 1.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -24.048260448650048,
          "delta_origination_bps": -7.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 8.029166666666667,
          "total_delta_bps": -46.72118379858888,
          "tokenized_wacd": 0.05922044296635126,
          "wacd_delta_bps": -35.040887848941665
        },
        {
          "scenario": "Tinlake TVL +50%",
          "liquidity_scale": 1.5,
          "beta_override": null,
          "infra_tx_multiplier": 1.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -72.14478134595015,
          "delta_origination_bps": -7.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 8.029166666666667,
          "total_delta_bps": -94.81770469588898,
          "tokenized_wacd": 0.055613203899053755,
          "wacd_delta_bps": -71.11327852191674
        },
        {
          "scenario": "Beta = 0.3",
          "liquidity_scale": 1.0,
          "beta_override": 0.3,
          "infra_tx_multiplier": 1.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -48.096520897300095,
          "delta_origination_bps": -4.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 8.029166666666667,
          "total_delta_bps": -67.76944424723894,
          "tokenized_wacd": 0.05764182343270251,
          "wacd_delta_bps": -50.8270831854292
        },
        {
          "scenario": "Beta = 0.7",
          "liquidity_scale": 1.0,
          "beta_override": 0.7,
          "infra_tx_multiplier": 1.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -48.096520897300095,
          "delta_origination_bps": -10.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 8.029166666666667,
          "total_delta_bps": -73.76944424723894,
          "tokenized_wacd": 0.05719182343270251,
          "wacd_delta_bps": -55.3270831854292
        },
        {
          "scenario": "Infra \u00d7 2",
          "liquidity_scale": 1.0,
          "beta_override": null,
          "infra_tx_multiplier": 2.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -48.096520897300095,
          "delta_origination_bps": -7.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 16.058333333333334,
          "total_delta_bps": -62.74027758057227,
          "tokenized_wacd": 0.05801901093270251,
          "wacd_delta_bps": -47.0552081854292
        },
        {
          "scenario": "Stressed",
          "liquidity_scale": 0.5,
          "beta_override": 0.3,
          "infra_tx_multiplier": 2.0,
          "delta_credit_bps": -5.702090016605502,
          "delta_liquidity_bps": -24.048260448650048,
          "delta_origination_bps": -4.5,
          "delta_servicing_bps": -17.5,
          "delta_infrastructure_bps": 16.058333333333334,
          "total_delta_bps": -35.69201713192221,
          "tokenized_wacd": 0.06004763046635126,
          "wacd_delta_bps": -26.769012848941657
        }
      ],
      "export_path": "data/derived/sensitivities/wacd_delta_sensitivity_2025-11-22_222444.csv"
    }
  }
}